/*! angular-d3-charts - v0.1.3-alpha1 - 2014-06-27
* https://github.com/elesdoar/angular-d3-charts
* Copyright (c) 2014 ; Licensed MIT */
!function(){"use strict";angular.module("angular-d3-charts",[]).directive("a3bar",function(a,b,c,d,e){return{restrict:"EA",replace:!0,scope:{options:"=options",data:"=data"},template:'<div class="angular-a3bar"></div>',controller:function(b){a.info("[Angular - D3] Bar scope controller",b)},link:function(f,g,h){if(!jQuery)return void a.error("JQuery is not loaded");f.container=g,f.type="bar",f.classPrefix="a3bar";var i=b.isDefined,j=e.setDefaults(f.options,h.id);b.setSize(g,j,h),d.setXScale(f,j),d.setYScale(f,j),i(j.zoom)&&j.zoom&&c.addZoomBehaviour(f,d.zoomBehaviour),c.addSVG(f,g.get(0),j),g.width(j.containerWidth),g.height(j.containerHeight),d.addAxis(f,j),c.updateStyles(f,j),f.$watch("data",function(){d.updateData(f,j)})}}}),angular.module("angular-d3-charts").directive("a3oabar",function(a,b,c,d,e){return{restrict:"EA",replace:!0,scope:{options:"=options",data:"=data"},template:'<div class="angular-a3oabar"></div>',controller:function(b){a.info("[Angular - D3] One Axis Bar scope controller",b)},link:function(f,g,h){if(!jQuery)return void a.error("JQuery is not loaded");f.container=g,f.type="oneAxisBar",f.classPrefix="a3oabar";var i=b.isDefined,j=e.setDefaults(f.options,h.id);b.setSize(g,j,h),j.x.orient="bottom",d.setXScale(f,j),d.setYScale(f,j),i(j.zoom)&&j.zoom&&c.addZoomBehaviour(f,d.zoomBehaviour),c.addSVG(f,g.get(0),j),g.width(j.containerWidth),g.height(j.containerHeight),d.addOneAxis(f,j),c.updateStyles(f,j),f.$watch("data",function(){d.updateData(f,j)})}}}),angular.module("angular-d3-charts").directive("a3pie",function(a,b,c,d,e){return{restrict:"EA",replace:!0,scope:{options:"=options",data:"=data"},template:'<div class="angular-a3pie"></div>',controller:function(b){a.info("[Angular - D3] Pie scope controller",b)},link:function(f,g,h){if(!jQuery)return void a.error("JQuery is not loaded");f.container=g,f.type="pie",f.classPrefix="a3pie";var i=e.setDefaults(f.options,h.id);b.setSize(g,i,h),c.addSVG(f,g.get(0),i),f.svg.attr("transform","translate("+i.width/2+","+i.height/2+")"),g.width(i.containerWidth),g.height(i.containerHeight),d.addArc(f,i),f.$watch("data",function(){d.updateData(f,i)})}}}),angular.module("angular-d3-charts").directive("a3line",function(a,b,c,d,e){return{restrict:"EA",replace:!0,scope:{options:"=options",data:"=data"},template:'<div class="angular-a3line"></div>',controller:function(b){a.info("[Angular - D3] Line scope controller",b)},link:function(d,f,g){if(!jQuery)return void a.error("JQuery is not loaded");d.container=f,d.type="line",d.classPrefix="a3line";var h=e.setDefaults(d.options,g.id);b.setSize(f,h,g),c.addSVG(d,f.get(0),h),f.width(h.containerWidth),f.height(h.containerHeight)}}}),angular.module("angular-d3-charts").factory("d3Helpers",function(a){function b(b,c){var d,e;if(angular.isDefined(c))d=c;else if(1===Object.keys(b).length)for(e in b)b.hasOwnProperty(e)&&(d=e);else 0===Object.keys(b).length?d="main":a.error("[AngularJS - D3] - You have more than 1 object on the DOM, you must provide the object ID");return d}function c(){return{width:300,heigth:250,zoom:!0,margin:{left:10,right:10,top:10,bottom:10},legend:{show:!0,width:120},timeFormat:"%d-%m-%Y",fontFamily:"Arial",fontSize:"0.75em",axis:{show:!0,stroke:"#000",color:"#000",label:{color:"#000",fontWeight:"bold"},fontWeight:"normal"},showDefaultData:!0,locale:null,animations:{time:750,ease:"cubic-in-out"}}}return{isEmpty:function(a){return 0===Object.keys(a).length},isUndefinedOrEmpty:function(a){return angular.isUndefined(a)||null===a||0===Object.keys(a).length},isDefined:function(a){return angular.isDefined(a)&&null!==a},isNumber:function(a){return angular.isNumber(a)},isString:function(a){return angular.isString(a)},isArray:function(a){return angular.isArray(a)},isObject:function(a){return angular.isObject(a)},isFunction:function(a){return angular.isFunction(a)},equals:function(a,b){return angular.equals(a,b)},safeApply:function(a,b){var c=a.$root.$$phase;"$apply"===c||"$digest"===c?a.$eval(b):a.$apply(b)},getCommonDefaults:c,setDefaults:function(a,b){this.isDefined(b)&&(a.width=this.isDefined(b.width)?b.width:a.width,a.heigth=this.isDefined(b.heigth)?b.heigth:a.heigth,a.zoom=this.isDefined(b.zoom)?b.zoom:a.zoom,a.timeFormat=this.isDefined(b.timeFormat)?b.timeFormat:a.timeFormat,a.fontFamily=this.isDefined(b.fontFamily)?b.fontFamily:a.fontFamily,a.fontSize=this.isDefined(b.fontSize)?b.fontSize:a.fontSize,a.showDefaultData=this.isDefined(b.showDefaultData)?b.showDefaultData:a.showDefaultData,a.locale=this.isDefined(b.locale)?b.locale:a.locale,this.isDefined(b.margin)&&angular.extend(a.margin,b.margin),this.isDefined(b.legend)&&angular.extend(a.legend,b.legend),this.isDefined(b.axis)&&angular.extend(a.axis,b.axis),this.isDefined(b.animations)&&angular.extend(a.animations,b.animations))},setSize:function(a,b,c){var d=this.isDefined(c.width)?c.width:b.width,e=this.isDefined(c.height)?c.height:b.height;isNaN(d)?a.css("width",d):a.css("width",d+"px"),isNaN(e)?a.css("height",e):a.css("height",e+"px"),b.width=a.width(),b.height=a.height()},getDataFromScope:function(a,b){var c=null;return this.isUndefinedOrEmpty(a.data)&&b.showDefaultData&&!this.isUndefinedOrEmpty(b.defaultData)?c=b.defaultData:this.isString(a.data)||(c=a.data),c},getRandomString:function(a){for(var b="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",c=a||8,d="",e=0;c>e;e++){var f=Math.floor(Math.random()*b.length);d+=b.substring(f,f+1)}return d},getRandomColor:function(){var a=Math.floor(256*Math.random()),b=Math.floor(256*Math.random()),c=Math.floor(256*Math.random());return d3.rgb(a,b,c)},obtainEffectiveChartId:b}}),angular.module("angular-d3-charts").factory("iconHelpers",function(){return{tree:"m 101.56082,48.552288 c -0.88364,1.27999 -1.603384,1.357043 -1.562119,2.826786 0.119189,0.64172 0.977609,0.392162 1.562119,0.471514 -0.0333,0.66932 -0.0665,1.33634 0.38968,1.414543 -1.161,1.423742 -2.082459,3.140743 -3.903601,3.769812 -0.119195,1.472044 1.12661,-1.198336 1.170161,0.471515 -0.406863,1.233987 -1.23778,1.959658 -1.952943,2.827935 0.978764,1.02008 3.413063,0.279458 3.515063,2.356419 -2.258944,-0.36916 -3.338565,0.684272 -5.468005,0.470364 1.844064,2.005661 -0.857278,2.099964 0,4.242478 -0.382796,0.760173 -1.041799,1.083332 -1.562127,0.471514 0.248703,1.028132 -1.10598,1.499646 0.389673,1.413393 -1.12088,0.35651 -2.484731,2.260967 -3.124251,0.471515 -0.5868,3.530605 -3.027979,4.827843 -5.856537,5.654718 1.218297,1.723902 0.324344,2.316169 0,4.713992 -1.350098,-0.372612 -1.648082,0.524416 -2.342615,0.943028 0.46646,0.680821 1.923145,0.714171 0.389672,1.413393 0.08939,0.600318 1.167869,0.616418 1.173599,0 1.132341,1.247787 -1.445223,1.99991 -2.73687,1.884906 -1.123172,-3.471954 -3.542575,0.549717 -4.684084,1.414542 -2.230298,-2.450723 -6.107531,-0.125354 -7.80948,2.355271 -0.991372,-0.247258 -2.82512,-0.661269 -1.954089,0.471514 -0.375918,1.167284 -1.500237,-0.648619 -2.732286,0 0.467605,-0.618719 0.152429,-0.741772 0,-1.413392 -2.525991,1.966558 -3.633117,2.903837 -7.030138,1.413392 -0.79195,0.957979 -1.810827,1.304139 -1.170161,2.827935 -0.61889,0.04025 -1.492214,-0.226557 -1.560979,0.471514 -1.128902,-0.211606 -0.924897,-2.028661 -1.954089,-2.356421 -0.456146,7.30157 -2.178724,20.025552 3.90474,22.623472 4.99009,2.13102 12.584104,-1.49159 16.79256,2.82679 -14.971418,0 -29.939397,0 -44.909668,0 0.116901,-0.95798 0.781635,-1.25468 1.171307,-1.88491 5.748804,-1.38693 10.138342,0.37491 13.668309,-1.41338 4.826199,-2.44612 3.203331,-16.080939 1.170162,-21.680458 -2.269265,-1.474345 -3.32711,-4.01477 -6.247356,-2.357571 0.166184,-0.984429 -0.268185,-1.247787 -0.390818,-1.884906 -4.370053,0.923479 -6.35394,-1.949309 -11.716512,-1.887207 0.161599,-1.133934 -0.71287,-1.02353 -0.390817,-2.356421 -1.542643,-0.753271 -4.592397,1.529547 -6.638174,-0.470363 2.143196,-1.411093 -1.711117,-0.30706 -0.390817,-1.887207 -1.329469,0.828024 -1.454393,-0.150654 -1.951797,-1.413392 -1.22632,0.729122 -2.177578,0.301309 -3.124251,-0.471513 0.207443,-0.379512 0.406864,-0.765924 0.390817,-1.413394 -0.710578,0.100053 -1.421155,-1.02123 -3.125395,-0.943027 -0.649835,-0.936128 0.03553,-0.599169 0,-1.884907 -2.3437613,0.103502 -0.838941,1.444442 -3.1242509,0 0.2028585,-0.695771 0.5787771,-1.186836 0.7816356,-1.886057 -0.6314974,0.809625 -1.6343292,1.171886 -3.1242505,0.943029 0.2028585,-2.196566 1.1518238,-2.086163 0,-3.770964 1.9449205,0.675071 1.2412191,0.392162 0.7804896,-1.413391 0.7014092,-0.0598 0.824041,0.577317 1.5621253,0.471513 C 7.1651335,64.353762 4.4557688,61.621281 6.6631446,59.386763 5.0425687,59.348813 4.4798368,57.975672 2.7584045,57.030343 3.1515145,56.404724 3.1274466,55.27654 3.9297119,55.144287 3.7085159,54.704974 2.8443616,54.431265 3.5388941,54.202408 c -0.2567249,-1.413392 -0.835502,0.451964 -1.5621252,0 0.221196,-1.148885 0.3346593,-2.424272 1.5621252,-2.357571 -0.4389537,-1.354739 -0.8206028,-2.780782 -1.5621252,-3.769811 0.075642,1.060331 -0.1615992,1.085631 0,2.827934 -2.04692278,0.05405 0.085957,-2.202317 -1.95179703,-2.356421 C 0.81348409,47.110145 -0.47014047,46.095816 0.41922798,44.781326 1.622626,44.429415 0.89485677,46.407474 2.371025,45.724354 2.9119811,45.193038 1.5469838,42.973472 1.5905355,41.483027 3.4598137,42.89872 3.7853042,40.623952 3.5423323,38.184728 5.4631849,37.357853 6.1806393,35.083085 8.2287082,34.413766 7.920409,33.941101 6.8637109,34.589721 6.2757651,33.471887 6.8442274,27.875819 9.3495874,25.063986 11.743777,20.745606 c 0.22578,2.141363 2.386166,0.901627 2.34376,2.356421 1.250389,-0.915427 1.747793,-1.346691 3.513922,-2.356421 -0.881345,1.820504 0.664735,1.932057 2.342615,1.887207 0.649835,0.934978 -0.03438,0.599168 0,1.884905 2.100789,-0.67852 3.111644,-0.555466 5.077193,-1.884905 -0.355287,-1.711252 -1.152969,-0.288659 -2.343759,-0.471514 0.606282,-1.182237 1.585046,-1.578998 0.782781,-3.300599 2.67842,0.02645 1.131195,-1.720452 1.560978,-2.827935 2.158095,0.0713 1.391358,1.216735 3.125398,0 -0.257872,-1.411093 -0.835502,0.450813 -1.563271,0 0.720892,-2.66463 0.605137,-3.408703 1.563271,-5.65472 2.644037,0.302458 4.757433,-1.6986009 5.466865,0.940728 0.127216,-1.7929037 2.577563,-2.5542265 3.513922,-1.8849063 0.354143,-1.1776354 3.234276,-3.6881606 3.513923,-1.8860567 0.881345,-0.3519105 0.153575,-2.6427792 0.390817,-3.7709629 0.676195,-1.2247868 3.222815,-0.1943559 3.124251,-2.3552706 1.045237,0.4657638 2.059529,0.970629 3.515068,0.9430282 -0.09053,1.8044041 0.720893,2.0643118 0.390818,3.2982988 0.312884,0.2058562 1.605677,0.6026181 2.342616,0 -1.594217,-2.4829244 1.054405,0.3082092 0,-2.8290847 1.465852,0.3576606 1.321444,-1.232837 1.951796,-1.88490656 1.426887,0.96832896 1.753523,-0.21275637 2.734579,-0.94302826 2.28531,2.86128582 3.982674,0.44851345 6.638173,1.88720652 0.216611,0.1173035 -1.014294,0.7912239 -1.170162,0.4715142 1.110565,2.2839684 5.575744,2.0562616 6.247355,5.1832053 0.954696,-1.1592346 1.693926,0.3496106 3.125396,0 0.108879,0.7613229 -0.369042,0.8119244 -0.391964,1.4133925 2.011394,-1.0246808 1.355829,1.1350845 3.515069,0.9430282 -0.168476,0.7406213 -1.228612,0.4025113 -0.781636,1.8849063 0.344974,0.371461 2.656644,-0.08166 2.733433,1.886057 1.611407,0.08395 1.160992,-1.591649 1.563271,-1.886057 0.397695,3.207446 4.105307,2.404722 5.46572,5.185506 1.05899,-0.584217 0.971887,-1.820505 2.344906,-0.943029 -2.052652,2.232218 1.596509,5.055551 2.341469,8.013441 -0.31403,-0.250708 -0.63379,-0.491065 -1.170161,-0.471515 1.951797,1.871106 -0.985641,4.271229 2.343761,4.713992 0.578777,-0.207007 -0.155869,-0.603768 0,-1.414542 1.33176,-0.351911 0.495113,1.914807 1.950651,1.414542 -1.313423,4.180375 0.330075,8.257247 1.954089,11.311738 -1.410841,-1.107482 -2.162679,-0.608368 -3.125397,0.941879 1.658397,1.336341 3.762625,1.772203 5.46572,0 -0.824042,1.883757 2.371267,-0.359961 2.735725,1.887207 0.882492,-0.263358 -0.473337,-0.736023 0.389671,-1.414542 1.133486,1.461694 1.550665,3.784763 3.124251,4.713989 -0.33007,1.381193 -1.257265,-0.280607 -1.951798,0 0.09512,0.829176 0.672758,1.074134 1.562118,0.940729 -0.755267,1.170736 0.38166,1.680201 -0.781627,2.358722 0.865307,1.754952 1.044087,-1.199487 2.341467,-0.474966 z M 6.6665829,50.908709 c -0.010314,1.245487 0.3644576,2.95444 -1.1701614,2.357572 -0.2693319,1.266188 0.8068499,0.910827 1.1701614,1.413392 0.033236,-2.672681 1.5162815,-1.179936 3.1253966,-2.829085 -1.4899214,0.604918 -1.2079825,-2.254067 -1.1713074,-0.941879 -0.331221,1.382342 -1.2584105,-0.281758 -1.9540892,0 z"}}),angular.module("angular-d3-charts").factory("barDefaults",function(a){function b(){var b=a.getCommonDefaults();return angular.extend(b,{series:["A","B","C","D"],bar:{gap:.2,path:null,colors:d3.scale.category20(),subcolors:null},x:{tickFormat:null,tickSize:6,orient:"bottom",position:"bottom",key:"x",label:"x",ticks:5,tickSubdivide:4},y:{scale:"linear",tickFormat:null,tickSize:6,orient:"left",position:"left",direction:"ttb",key:"y",label:"y",ticks:5,tickSubdivide:4,minFromZero:!0},axis:{guidePosition:"top",showValues:!0,valuesColor:"#000",showPercent:!0,percentColor:"#000",label:{color:"#000",fontWeight:"bold"},show:!0},defaultData:[{id:1,x:"Fruits",y:[54,0,879],tooltip:"Fruits tooltip"},{id:2,x:"Vegetables",y:[12,34,15],tooltip:"Vegetables tooltip"},{id:3,x:"Meet",y:[154,432,234],tooltip:"Meet tooltip"}]}),b}var c=a.isDefined,d=a.obtainEffectiveChartId,e={};return{getDefaults:function(a){var b=d(e,a);return e[b]},getCreationDefaults:function(a){var b=this.getDefaults(a),c={};return angular.extend(c,b),c},setDefaults:function(f,g){var h=b();c(f)&&(a.setDefaults(h,f),c(f.bar)&&angular.extend(h.bar,f.bar),c(f.x)&&angular.extend(h.x,f.x),c(f.y)&&angular.extend(h.y,f.y),c(h.defaultData)&&angular.extend(h.defaultData,h.defaultData));var i=d(e,g);return e[i]=h,h}}}),angular.module("angular-d3-charts").factory("pieDefaults",function(a){function b(){var b=a.getCommonDefaults();return angular.extend(b,{radius:0,x:{key:"x",label:"x",show:!0},y:{key:"y",label:"y"},defaultData:[{id:1,x:"Fruits",y:54,tooltip:"Fruits tooltip"},{id:2,x:"Vegetables",y:23,tooltip:"Vegetables tooltip"},{id:3,x:"Meet",y:41,tooltip:"Meet tooltip"}],showPercent:!1,borderColor:"#FFF",pieAnimation:"normal"}),b}var c=a.isDefined,d=a.obtainEffectiveChartId,e={};return{getDefaults:function(a){var b=d(e,a);return e[b]},getCreationDefaults:function(a){var b=this.getDefaults(a),c={};return angular.extend(c,b),c},setDefaults:function(f,g){var h=b();c(f)&&(a.setDefaults(h,f),h.radius=a.isDefined(f.radius)?f.radius:h.radius,h.showPercent=a.isDefined(f.showPercent)?f.showPercent:h.showPercent,h.borderColor=a.isDefined(f.borderColor)?f.borderColor:h.borderColor,h.pieAnimation=a.isDefined(f.pieAnimation)?f.pieAnimation:h.pieAnimation,c(f.x)&&angular.extend(h.x,f.x),c(f.y)&&angular.extend(h.y,f.y),c(h.defaultData)&&angular.extend(h.defaultData,h.defaultData));var i=d(e,g);return e[i]=h,h}}}),angular.module("angular-d3-charts").factory("lineDefaults",function(a){function b(){var b=a.getCommonDefaults();return angular.extend(b,{series:["A","B","C","D"],x:{scale:"linear",tickFormat:null,tickSize:6,orient:"bottom",position:"bottom",key:"x",label:"x",ticks:5,tickSubdivide:4},y:{scale:"linear",tickFormat:null,tickSize:6,orient:"left",position:"left",key:"y",label:"y",ticks:5,tickSubdivide:4},axis:{valuesColor:"#000",percentColor:"#000",label:{color:"#000",fontWeight:"bold"}},defaultData:[{id:1,x:"Fruits",y:[54,0,879],tooltip:"Fruits tooltip"},{id:2,x:"Vegetables",y:[12,34,15],tooltip:"Vegetables tooltip"},{id:3,x:"Meet",y:[154,432,234],tooltip:"Meet tooltip"}]}),b}var c=a.isDefined,d=a.obtainEffectiveChartId,e={};return{getDefaults:function(a){var b=d(e,a);return e[b]},getCreationDefaults:function(a){var b=this.getDefaults(a),c={};return angular.extend(c,b),c},setDefaults:function(f,g){var h=b();c(f)&&(a.setDefaults(h,f),c(f.x)&&angular.extend(h.x,f.x),c(f.y)&&angular.extend(h.y,f.y),c(h.defaultData)&&angular.extend(h.defaultData,h.defaultData));var i=d(e,g);return e[i]=h,h}}}),angular.module("angular-d3-charts").factory("barHelpers",function(a,b,c){var d=function(a){return a.id};return{addAxis:function(a,b){c.addXAxis(a,b),c.addYAxis(a,b),c.addSubdivideTicks(a.yl,a.y,a.yAxis,b.y)},addOneAxis:function(a,b){c.addXAxis(a,b),a.ylTopOffset="top"===b.x.position?.125*b.height:.2*b.height,a.guide=a.svg.append("g").attr("class","guide");var d="bottom"===b.axis.guidePosition?1*b.height:a.ylTopOffset-.03*b.height;a.guide.append("line").attr("x1",a.xlLeftOffset).attr("x2",b.width+a.xlLeftOffset).attr("y1",d).attr("y2",d).style("stroke","#BBB").style("stroke-width",1).style("shape-rendering","crispEdges")},setXScale:function(c,d){c.x=d3.scale.ordinal(),b.isDefined(c.xAxis)?c.xAxis.scale(c.x):((!b.isDefined(d.x.orient)||!b.isString(d.x.orient)||"bottom"!==d.x.orient&&"top"!==d.x.orient)&&(a.warn('[Angular - D3] Tick orient must be a string. Setting default value "bottom"'),d.x.orient="bottom"),c.xAxis=d3.svg.axis().scale(c.x).orient(d.x.orient)),b.isDefined(d.x.tickSize)&&b.isNumber(d.x.tickSize)?c.xAxis.tickSize(d.x.tickSize):(a.warn("[Angular - D3] Ticksize must be a number. Setting default value 6"),d.x.tickSize=6,c.xAxis.tickSize(d.x.tickSize));var e=b.getDataFromScope(c,d);c.x.domain(e.map(function(a){return a[d.x.key]})).rangeBands([0,d.width],d.bar.gap),c.xAxis.tickFormat(d.x.tickFormat),b.isDefined(c.data)&&this.updateData(c.data,d)},setYScale:function(c,d){switch(d.y.scale){case"log":c.y=d3.scale.log().clamp(!0);break;case"sqrt":c.y=d3.scale.sqrt();break;case"time":c.y=d3.time.scale();break;default:"linear"!==d.y.scale&&(a.warn('[Angular - D3] Ticksize must be a string and ["linear", "log", "time", "sqrt"]. Setting default value "linear"'),d.y.scale="linear"),c.y=d3.scale.linear()}var e=0;switch("oneAxisBar"===c.type&&(e=.2*d.height,"bottom"===d.axis.guidePosition&&(e+=.05*d.height)),c.y.range([0,d.height-e]),b.isDefined(c.yAxis)?c.yAxis.scale(c.y):(b.isDefined(d.y.orient)&&b.isString(d.y.orient)||(a.warn('[Angular - D3] Tick orient must be a string. Setting default value "left"'),d.y.orient="left"),c.yAxis=d3.svg.axis().scale(c.y).orient(d.y.orient)),b.isDefined(d.y.tickSize)&&b.isNumber(d.y.tickSize)?c.yAxis.tickSize(d.y.tickSize):(a.warn("[Angular - D3] Ticksize must be a number. Setting default value 6"),d.y.tickSize=6,c.yAxis.tickSize(d.y.tickSize)),d.y.scale){case"log":b.isDefined(d.y.tickFormat)||(d.y.tickFormat=function(a){var b=d3.round(Math.log(a)/Math.LN10,3);return b%1===0?a:""}),c.yAxis.ticks(d.y.ticks),c.y.domain("btt"===d.y.direction?[1e3,.1]:[.1,1e3]);break;case"time":if(!b.isDefined(d.y.tickFormat)){var f=b.isDefined(d.locale)?d.locale.timeFormat:d3.time.format;d.y.tickFormat=f.multi([[".%L",function(a){return a.getMilliseconds()}],[":%S",function(a){return a.getSeconds()}],["%I:%M",function(a){return a.getMinutes()}],["%I %p",function(a){return a.getHours()}],["%a %d",function(a){return a.getDay()&&1!==a.getDate()}],["%b %d",function(a){return 1!==a.getDate()}],["%B",function(a){return a.getMonth()}],["%Y",function(){return!0}]])}c.yAxis.ticks(d.y.ticks);break;default:c.yAxis.ticks(d.y.ticks+d.y.ticks*d.y.tickSubdivide),c.y.domain("btt"===d.y.direction?[100,0]:[0,100])}c.yAxis.tickFormat(d.y.tickFormat),b.isDefined(c.data)&&this.updateData(c.data,d)},zoomBehaviour:function(){},updateData:function(e,f){if(b.isDefined(e.x)&&b.isDefined(e.y)){var g=b.getDataFromScope(e,f);if(b.isUndefinedOrEmpty(g))return void a.warn("[Angular - D3] No data for bars");a.debug("[Angular - D3] Data for bars:",g);var h=d3.time.format(f.timeFormat),i=d3.scale.category20();b.isDefined(f.bar.colors)&&(i=b.isArray(f.bar.colors)?d3.scale.ordinal().range(f.bar.colors):i,i=b.isString(f.bar.colors)?d3.scale.ordinal().range([f.bar.colors]):i,i=b.isFunction(f.bar.colors)?f.bar.colors:i);var j=function(a){return a[f.y.key].map(function(b){return{parentId:a.id,x:a[f.x.key],y:b}})},k=g.map(function(a){return a[f.x.key]});e.x.domain(k),e.xl.call(e.xAxis),a.debug("[Angular - D3] x domain:",k);var l=[],m=d3.max(g,function(a){return d3.max(a[f.y.key],function(a,c){return"time"!==f.y.scale||a instanceof Date||(a=h.parse(a)),b.isDefined(l[c])?l[c]+=a:l.push(a),a})}),n=0;f.y.minFromZero||(n=d3.min(g,function(a){return d3.min(a[f.y.key])})),a.debug("[Angular - D3] Data max for bars:",m),void 0===n||void 0===m||0===n&&0===m?(n=0,m="time"===f.y.scale?new Date:100):n-m===0&&(n=n instanceof Date?0:n-Math.abs(n/2),m=m instanceof Date?m:m+Math.abs(m/2)),e.y.domain("btt"===f.y.direction?[m,n]:[n,m]),m>n&&e.y.nice(),"bar"===e.type&&(e.yl.call(e.yAxis),c.addSubdivideTicks(e.yl,e.y,e.yAxis,f.y)),b.isDefined(e.zoom)&&b.isDefined(f.zoom)&&f.zoom&&e.zoom.x(e.x).y(e.y);var o=d3.max(g.map(function(a){return a[f.y.key].length})),p=d3.scale.ordinal().domain(d3.range(o)).rangeRoundBands([0,e.x.rangeBand()]),q=e.svg.select("g."+e.classPrefix+"-bars");q.empty()&&(q=e.svg.append("g").attr("transform","translate("+e.xlLeftOffset+","+e.ylTopOffset+")").attr("class",e.classPrefix+"-bars").attr("clip-path","url(#"+e.idClip+")"));var r=function(a,c){b.isDefined(f.bar.path)?(a.transition().duration(f.animations.time).attrTween("transform",function(a,b,c){var d=115,g=Math.abs((e.y(a.y)-e.y(n))/d),h="btt"===f.y.direction?e.y.range()[1]-d*g:0,i="translate("+(e.x(a.x)+p(b)-102*g/2+p.rangeBand()/2)+", "+h+")",j=d3.interpolateTransform(c,i);return function(a){return j(a)}}),a=c?a.selectAll("path"):a.append("path").attr("d",f.bar.path).attr("class","a3bar-bar-path").attr("fill-rule","evenodd").attr("transform","scale(0)").style("opacity",0),a.style("fill",function(a,b){var c=d3.rgb(i(b));return c}).style("stroke",function(a,b){return d3.rgb(i(b)).darker()}).style("stroke-width",1).transition().ease(f.animations.ease).duration(f.animations.time).attrTween("transform",function(a,b,c){a=d3.select(this.parentNode).data()[0];var d=Math.abs((e.y(a.y)-e.y(n))/115);return d3.interpolateString(c,"scale("+d+")")}).style("opacity",.8)):a.attr("width",p.rangeBand()).attr("title",function(a){var b=d3.format("0,000");return b(a[f.y.key])}).attr("x",function(a,b){return e.x(a[f.x.key])+p(b)}).attr("height",function(){var a=d3.select(this).attr("height");return a?a:0}).attr("transform",function(){return"translate(0, "+("btt"===f.y.direction?e.y.range()[1]:0)+")"}).style("fill",function(a,c){var d=d3.rgb(i(c)),e=.5+a[f.y.key]/m,g=1>=e?d.brighter(1-e):d.darker(e);return b.isDefined(f.bar.subcolors)?f.bar.subcolors[a.parentId-1]:g}).transition().ease(f.animations.ease).duration(f.animations.time).attr("height",function(a){return Math.abs(e.y(a[f.y.key])-e.y(n))}).attrTween("transform",function(a,b,c){var d=Math.abs(e.y(a[f.y.key])-e.y(n)),g="btt"===f.y.direction?e.y.range()[1]-d:0,h=d3.interpolateTransform(c,"translate(0, "+g+")");return function(a){return h(a)}}),a.select("title").remove(),a.append("title").text(function(a){var b=d3.format(".3g");return b(a[f.y.key])})},s=q.selectAll("."+e.classPrefix+"-group-bar").data(g,d);s.interrupt(),s.exit().remove();var t=s.selectAll("."+e.classPrefix+"-bar").data(j);t.interrupt(),r(t,!0),t.exit().remove();var u=s.enter().append("g").attr("class",e.classPrefix+"-group-bar");if(t=u.selectAll("."+e.classPrefix+"-bar").data(j).interrupt().enter().append(b.isDefined(f.bar.path)?"g":"rect").attr("class",e.classPrefix+"-bar"),r(t),"oneAxisBar"===e.type){e.svg.select("g."+e.classPrefix+"-helptext").remove();var v=e.svg.append("g").attr("transform","translate("+e.xlLeftOffset+","+(e.ylTopOffset-("bottom"===f.x.position?.15*f.height:.85*-f.height))+")").attr("class",e.classPrefix+"-helptext"),w=v.selectAll("."+e.classPrefix+"-values").data(g,d).interrupt();u=w.enter().append("g").attr("class",e.classPrefix+"-values"),f.axis.showValues&&u.selectAll("."+e.classPrefix+"-val").data(j).interrupt().enter().append("text").attr("x",function(a,b){return e.x(a.x)+p(b)+p.rangeBand()/2}).attr("dy",f.axis.showPercent?0:"0.5em").attr("class",e.classPrefix+"-val").style("text-anchor","middle").style("fill",f.axis.valuesColor).text(function(a){var b=d3.format(".3g");return b(a.y)}),f.axis.showPercent&&u.selectAll("."+e.classPrefix+"-percent").data(j).interrupt().enter().append("text").attr("x",function(a,b){return e.x(a.x)+p(b)+p.rangeBand()/2}).attr("y",.065*f.height).attr("dy",f.axis.showValues?0:"-0.5em").attr("class",e.classPrefix+"-percent").style("text-anchor","middle").style("font-size","0.85em").style("font-weight","bold").style("fill",f.axis.percentColor).text(function(a,b){var c=d3.format(".3p");return c(a.y/l[b])})}c.updateStyles(e,f)}}}}),angular.module("angular-d3-charts").factory("pieHelpers",function(a,b){function c(c,d,e,f){f.innerRadius=0;var g=null;switch(e.pieAnimation){case"inverse":g={startAngle:2*Math.PI,endAngle:2*Math.PI};break;case"crossfade":g={startAngle:2*Math.PI,endAngle:0};break;case"crossfade-inverse":g={startAngle:0,endAngle:2*Math.PI};break;default:b.isDefined(e.pieAnimation)&&""===e.pieAnimation||(a.warn('[Angular - D3] The option "pieAnimation" is undefined or it has a invalid value. Setting to "normal"'),e.pieAnimation="normal"),g={startAngle:0,endAngle:0}}c.parentNode._current&&(g=c.parentNode._current);var h=d3.interpolate(g,f);return c.parentNode._current=h(0),function(a){return d.arc(h(a))}}function d(a,b,c,d){var g;return(g=e(a,b,c,d))?{startAngle:g.endAngle,endAngle:g.endAngle}:(g=f(a,b,c,d))?{startAngle:g.startAngle,endAngle:g.startAngle}:null}function e(a,b,c,d){for(var e=b.length;--a>=0;)for(var f=d(c[a]),g=0;e>g;++g)if(d(b[g])===f)return b[g]}function f(a,b,c,d){for(var e=c.length,f=b.length;++a<e;)for(var g=d(c[a]),h=0;f>h;++h)if(d(b[h])===g)return b[h]}return{addArc:function(a,b){a.arc=d3.svg.arc().outerRadius(b.width/2-b.margin.left).innerRadius(b.radius),a.pie=d3.layout.pie().sort(null).value(function(a){return a[b.y.key]})},updateData:function(e,f){a.debug("Update data");var g=d3.scale.category20(),h=b.getDataFromScope(e,f);if(b.isUndefinedOrEmpty(h))return void a.warn("[Angular - D3] No data for pie");var i=d3.sum(h,function(a){return a[f.y.key]}),j=e.svg.selectAll("."+e.classPrefix+"-arc"),k=j.data(),l=e.pie(h),m=function(a){return a.data.id},n=function(){return c(this,e,f,d3.select(this.parentNode).data()[0])},o=j.data(l,m);j=o.enter().append("g").each(function(a,b){this._current=d(b,k,l,m)||a}).attr("class",e.classPrefix+"-arc"),j.append("path").style("opacity",0).style("fill",function(a){return g(a.data[f.x.key])}).style("stroke",f.borderColor),j.append("text").attr("transform",function(a){return"translate("+e.arc.centroid(a)+")"}).attr("dy",f.x.show?"-0.75em":0).attr("class",e.classPrefix+"-arc-val").style("text-anchor","middle").text(function(a){var b;if(f.showPercent){var c=d3.format("%");b=c(a.data[f.y.key]/i)}else b=a.data[f.y.key];return b}),f.x.show&&j.append("text").attr("transform",function(a){return"translate("+e.arc.centroid(a)+")"}).attr("dy",".75em").attr("class",e.classPrefix+"-arc-label").style("text-anchor","middle").text(function(a){return a.data[f.x.key]}),o.exit().datum(function(a,b){return d(b,l,k,m)||a}).remove(),o.selectAll("path").interrupt().transition().duration(f.animations.time).ease(f.animations.ease).attrTween("d",n).style("opacity",1),o.selectAll("."+e.classPrefix+"-arc-val").text(function(){var a,b=d3.select(this.parentNode).data()[0];if(f.showPercent){var c=d3.format("%");a=c(b.data[f.y.key]/i)}else a=b.data[f.y.key];return a}).transition().duration(750).attrTween("transform",function(a,b,c){var d=d3.select(this.parentNode).data()[0],f=d3.interpolateTransform(c,"translate("+e.arc.centroid(d)+")");return function(a){return f(a)}}),f.x.show&&o.selectAll("."+e.classPrefix+"-arc-label").text(function(){var a=d3.select(this.parentNode).data()[0];return a.data[f.x.key]}).transition().duration(750).attrTween("transform",function(a,b,c){var d=d3.select(this.parentNode).data()[0],f=d3.interpolateTransform(c,"translate("+e.arc.centroid(d)+")");return function(a){return f(a)}}),this.setStyles(e,f)},setStyles:function(a,b){a.svg.selectAll("."+a.classPrefix+"-arc text").style("fill",b.axis.color).style("font-weight",b.axis.fontWeight),a.svg.style("font-family",b.fontFamily).style("font-size",b.fontSize)}}}),angular.module("angular-d3-charts").factory("lineHelpers",function(a,b,c){return{addAxis:function(a,b){c.addXAxis(a,b),c.addYAxis(a,b),c.addSubdivideTicks(a.yl,a.y,a.yAxis,b.y)}}}),angular.module("angular-d3-charts").factory("svgHelpers",function(a,b){return{addSVG:function(a,c,d){var e=d.width+d.margin.left+d.margin.right;e+=d.legend.show?d.legend.width:0;var f=d.height+d.margin.top+d.margin.bottom+(d.axis.show?30:0);d.containerWidth=e,d.containerHeight=f;var g=d3.select(c).append("svg").attr("width",e).attr("height",f).append("g").attr("transform","translate("+d.margin.left+","+d.margin.top+")").style("cursor","pointer");return a.idClip="clip-"+b.getRandomString(),g.append("clipPath").attr("id",a.idClip).append("rect").attr("width",d.width).attr("height",d.height),a.svg=g,g},addZoomBehaviour:function(c,d){return b.isDefined(c.x)?b.isDefined(c.y)?void(c.zoom=d3.behavior.zoom().x(c.x).y(c.y).scaleExtent([.5,100]).on("zoom",d)):void a.warn("[Angular - D3] y scale is not defined, unable set zoom behavior"):void a.warn("[Angular - D3] x scale is not defined, unable set zoom behavior")},addXAxis:function(c,d){if(c.xl=c.svg.append("g").attr("class","x axis"),c.xlLeftOffset=0,d.axis.show&&"left"===d.y.position&&(c.xlLeftOffset=30,"right"===d.y.orient&&(c.xlLeftOffset+=10)),"oneAxisBar"===c.type&&(c.xlLeftOffset=0),!b.isDefined(d.x.position)||b.isString(d.x.position))switch(d.x.position){case"top":c.xl.attr("transform","translate("+c.xlLeftOffset+", "+("bottom"===d.x.orient?0:20)+")");break;default:b.isDefined(d.x.position)&&b.isString(d.x.position)&&"bottom"===d.x.position||(a.warn('[Angular - D3] X Axis position must be a string. Setting default value "bottom"'),d.x.position="bottom"),c.xl.attr("transform","translate("+c.xlLeftOffset+", "+(d.height+("bottom"===d.x.orient?0:20))+")")}else b.isNumber(d.x.position)&&c.xl.attr("transform","translate("+c.xlLeftOffset+", "+("bottom"===d.x.orient?d.x.position+20:d.x.position)+")");c.xl.call(c.xAxis),b.isDefined(d.x.label)&&d.x.label!==!1&&c.xl.append("text").attr("class","label").attr("transform","translate("+d.width+")").attr("dx","0.8em").attr("dy","bottom"===d.x.orient?"1.35em":0).style("text-anchor","start").style("font-size","1.1em").style("font-weight","bold").text(d.x.label)},addYAxis:function(c,d){if(c.yl=c.svg.append("g").attr("class","y axis"),c.ylTopOffset=0,d.axis.show&&"top"===d.x.position&&(c.ylTopOffset=30),!b.isDefined(d.y.position)||b.isString(d.y.position))switch(d.y.position){case"right":c.yl.attr("transform","translate("+(d.width+("left"===d.y.orient?20:0))+","+c.ylTopOffset+")");break;default:b.isDefined(d.y.position)&&b.isString(d.y.position)&&"left"===d.y.position||(a.warn('[Angular - D3] Y Axis position must be a string. Setting default value "left"'),d.y.position="left"),c.yl.attr("transform","translate("+("left"===d.y.orient?20:0)+","+c.ylTopOffset+")")}else b.isNumber(d.y.position)&&c.yl.attr("transform","translate("+(d.y.position-("left"===d.y.orient?20:0))+","+c.ylTopOffset+")");c.yl.call(c.yAxis),b.isDefined(d.y.label)&&d.y.label!==!1&&c.yl.append("text").attr("class","label").attr("dy","right"===d.y.position?4:"top"===d.x.position?0:"-1em").attr("x","right"===d.y.position?"1.5em":"1em").attr("y","top"===d.x.position?d.height:0).style("text-anchor","start").style("font-size","1.1em").style("font-weight","bold").text(d.y.label)},addSubdivideTicks:function(a,b,c,d){if(a.selectAll(".tick.minor").classed("minor",!1).selectAll("text").style("display",null).style("stroke-width",0),"sqrt"===d.scale||"linear"===d.scale)switch(a.selectAll(".tick").data(b.ticks(d.ticks),function(a){return a}).exit().classed("minor",!0).selectAll("text").style("display","none"),c.orient()){case"left":a.selectAll(".tick.minor line").attr("x2",-4);break;case"bottom":a.selectAll(".tick.minor line").attr("y2",4);break;case"top":a.selectAll(".tick.minor line").attr("y2",-4);break;case"right":a.selectAll(".tick.minor line").attr("x2",4)}},updateStyles:function(a,b){var c="bar"===a.type?b.axis.stroke:null;b.axis.show===!0?(a.svg.selectAll(".axis path").style("stroke",c).style("fill","none").style("shape-rendering","crispEdges"),a.svg.selectAll(".axis .tick line").style("stroke",c).style("fill","none"),a.svg.selectAll(".axis .tick.minor").style("stroke",c).style("fill","none"),a.svg.selectAll(".axis text").style("fill",b.axis.color).style("font-weight",b.axis.fontWeight),a.svg.selectAll(".axis .label").style("fill",b.axis.label.color).style("font-weight",b.axis.label.fontWeight)):a.svg.selectAll(".axis").style("display","none"),a.svg.style("font-family",b.fontFamily),a.svg.style("font-size",b.fontSize)
}}})}();